Procedia Computer Science
Volume 80, 2016, Pages 301–312
ICCS 2016. The International Conference on Computational
Science

Identifying the Sport Activity of GPS Tracks
C`esar Ferri
DSIC, Universitat Polit`ecnica de Val`encia
Cam´ı de Vera s/n, 46022 Val`encia, Spain.
cferri@dsic.upv.es

Abstract
The wide propagation of devices, such as mobile phones, that include a global positioning
system (GPS) sensor has popularised the storing of geographic information for diﬀerent kinds
of activities, many of them recreational, such as sport. Extracting and learning knowledge from
GPS data can provide useful geographic information that can be used for the design of novel
applications. In this paper we address the problem of identifying the sport from a GPS track
that is recorded during a sport session. For that purpose, we store 8500 GPS tracks from ten
diﬀerent kinds of sports. We extract twelve features that are able to represent the activity that
was recorded in a GPS track. From these features several models are induced by diverse machine
learning classiﬁcation techniques. We study the problem from two diﬀerent perspectives: ﬂat
classiﬁcation, i.e, models classify the track in one of the ten possible sport types; and hierarchical
classiﬁcation, i.e. given the high number of classes and the structure of the problem, we induce
a hierarchy in the classes and we address the problem as a hierarchical classiﬁcation problem.
For this second framework, we analyse three diﬀerent approaches. According to our results,
multiclassiﬁer systems based on decision trees obtain the better performance in both scenarios.
Keywords: Classiﬁcation, Hierarchical Classiﬁcation,Geographic Information, GPS

1

Introduction

The last generation of mobile phones, as well as other electronic devices, include diﬀerent
kinds of sensors able to capture the users real-time situational information, such as location,
speed, etc. One of the most powerful sensors is the GPS receiver that allows users to locate
spatially the device and track its position regularly. This data provides a source of innovation
in producing innovative applications to the device user. Recording GPS data for its analysis
can be very useful in diﬀerent ﬁelds. Speciﬁcally, the use of GPS tracks in machine learning
has been employed for diﬀerent purposes. Some works use GPS data for several goals in health
sciences [1] and agronomic sciences [13]. Recognising the transportation modes of people have
important applications in pervasive computing [18].
Since the increase in popularity of GPS devices, they are widely used for tracking sport
activities. For this purpose, there exist popular apps such as Runtastic or Endomondo that
Selection and peer-review under responsibility of the Scientiﬁc Programme Committee of ICCS 2016
c The Authors. Published by Elsevier B.V.

doi:10.1016/j.procs.2016.05.345

301

Identifying the Sport Activity of GPS Tracks

C`esar Ferri

allows users to register the tracks of the activities and then the user can share these tracks in
specialised social networks. A popular example of this kind of social networks is Wikiloc1 . In
this social network more than 1,000,000 users share about 2,500,000 GPS tracks of about 72
diﬀerent kinds of sports such as Hiking, Cycling, Sailing, Snowshoeing.... These GPS tracks
are located all around the world. Other examples of social networks based on GPS tracks are:
MapMyTracks2 and everytrail3 . In these social networks every time a user uploads a new track,
he must manually introduce the kind of sport activity for the GPS track.
In this paper we investigate how to identify automatically the kind of sport during the
activity that generated the GPS track with machine learning techniques. For that purpose, we
downloaded 10,000 GPS tracks of ten popular sports: Running, Cycling, Hiking... Using a GPS
library, we extracted a set of twelve features such as duration, length, average and maximum
speed.
We address the problem of sport identiﬁcation from two diﬀerent perspectives. First we
consider this problem as a traditional “ﬂat” classiﬁcation problem. In this way we measure the
performance of twelve diﬀerent classiﬁcation methods in predicting the sport that generated
the GPS from the ten possible alternatives. Given the high number of classes existing in the
problem we also study the performance of the methods when we build a tree of specialised local
classiﬁers.
The second perspective is based on the inherent hierarchical structure of the classes of the
problem. For instance, tracks generated when the user is using a bike (Cycling or Mountain
Biking) should have more similar features (length, average speed..) with respect to tracks
generated by aquatic sports (Kayaking and Sailing). In this case, many real-world classiﬁcation
problems are naturally cast as hierarchical classiﬁcation problems [14]. In this kind of problem,
the classes to be predicted are organised into a class hierarchy, usually a tree. According
to [14] there are three main diﬀerent broad types of approach: ﬂat, i.e., ignoring the class
hierarchy; local, the hierarchy is taken into account by using a local information perspective,
i.e. building local and specialised classiﬁers; and global, a single classiﬁcation model is built
taking into account the class hierarchy. Additionally, a hierarchical classiﬁcation method can
be implemented in a way that the learned model will always classify a leaf node (mandatory
leaf-node prediction) or the model can also consider stopping the classiﬁcation at any node in
any level of the hierarchy (non-mandatory leaf-node prediction).
Considering the task of identifying a sport from a GPS track as a hierarchical classiﬁcation
problem, we ﬁrst induce a class hierarchy tree based on the features of the sport and common
misclassiﬁcation errors between classes. Using this class hierarchy tree of sports, we compare
diﬀerent approaches with a distance-based performance metric for hierarchical classiﬁcation
problems. Speciﬁcally, we analyse ﬂat classiﬁcation; specialised local classiﬁers in a mandatory
leaf-node prediction context; a variation of the local approach where we add rejection rules [10]
in order to predict classes at any level of the hierarchy; and ﬁnally, a method for labelling of
instances based on the minimisation of the expected loss.
This paper is structured as follows. Section 2 includes details about the process of collecting
GPS tracks and extracting features. The techniques used for addressing the problem as ﬂat
classiﬁcation are explained in Section 3. Section 4 details the methods and results obtained
when we consider the problem as hierarchical classiﬁcation. A summary of related works is
included in Section 5. We ﬁnish the paper with the conclusions in Section 6.

1 http://www.wikiloc.com/wikiloc/home.do
2 https://www.mapmytracks.com/
3 http://www.everytrail.com/

302

Identifying the Sport Activity of GPS Tracks
Feature
length 2d
length 3d
moving time
stopped time
moving distance
stopped distance
max speed
ave speed
uphill norm
downhill norm
max elev
min elev

C`esar Ferri

Description
Length (2-dimensional) of route in kilometres
Length (3-dimensional) of route in kilo-meters
Time (seconds) of track with signiﬁcant movement
Time (seconds) of track without no signiﬁcant movement
Distance (meters) travelled during stopped times
Distance (meters) travelled during stopped times
Maximum speed (m/s) of the track
Average speed (m/s) of the track
Uphill elevation climbs divided by length 2d, in meters/km
Downhill elevation climbs divided by length 2d, in meters/km
Maximum elevation in meters of the track
Minimum elevation in meters of the track

Table 1: Features extracted from a GPS track.

2

Data Collection and Feature Extraction

In this section we give details about the recollection and manipulation of the GPS data.

2.1

GPS Tracks

GPS devices usually store tracks as GPX ﬁles. GPX (GPS Exchange Format) is an XML schema
designed as a common GPS data format for software applications. It can store waypoints, tracks,
and routes. In our case, we work with GPX ﬁles containing a track. This track is made of at
least one segment containing waypoints, that is, an ordered list of trackpoints describing a
path. Each trackpoint contains position (latitude and longitude), elevation and a timestamp.
Latitude and longitude are expressed in decimal degrees. Elevation is recorded in meters. Dates
and times are Coordinated Universal Time (UTC).

2.2

Feature Extraction

In order to identify the sport that generated the GPS track, we need to create a set of features
able to describe accurately the activity. These features will then be useful to determine the
kind of sport of a GPS track. For instance, if we detect a high speed segment in the GPS track,
it logically must be created practising a sport that involves the use of bicycles or motorbikes.
There exist software libraries that can analyse a GPS track and produce a set of features
that describe the track contained in the GPX ﬁle. In this work we use gpxpy4 a simple python
library for parsing and manipulating GPX ﬁles. Table 1 contains the features that we extract
for each GPS track. Most of them are directly or indirectly provided by the gpxpy library. We
have incorporated three features that we consider important for our purpose: Average speed,
Maximum elevation and Minimum elevation.

2.3

Dataset

In this work, we concentrate on the most popular sports according to the number of tracks
uploaded to social networks. Concretely, we selected ten diﬀerent kinds of sports. In Table 2
we include the sports selected, its acronym and a brief description.
4 Library

created by Tomo Krajina, https://github.com/tkrajina/gpxpy

303

Identifying the Sport Activity of GPS Tracks
Acr
rn
hi
mb
ci
tr
mo
mc
tb
ky
sl

Sport
Running
Hiking
Mountain biking
Cycling
Trail running
Mountaineering
Motorcycling
Trail bike
Kayaking
Sailing

C`esar Ferri

Description
The sport of someone who runs
Sport consisting of vigorous walks, usually on trails oﬀ-road
Sport of riding mountain bikes usually oﬀ-road
Bicycle racing sport usually held on paved roads
Sport consisting of running over trails
Sport of mountain climbing
Sport of travelling on a motorcycle
Recreational oﬀ-road and on-road riding of motorcycles
Sport consisting in the use of a kayak for moving across water
Sport of riding in a sailboat

Table 2: List of sports, acronyms, and a brief description.

Note that in some cases it is diﬃcult to diﬀerentiate clearly between some sports. For
instance, a hiking GPS track uploaded by an expert hiker can be very similar to the track
uploaded by a beginner trail runner. We ﬁnd a similar situation between cycling and mountain
biking sessions. Here the main diﬀerence is the kind of bike used in the activity as well as the
kind of road, but these features are not directly represented in a GPS track. With this in mind,
we studied the possibility of adding information about the the kind of track surface (on-road,
oﬀ-road, sea, river). There are some web services that oﬀer limited information such as knowing
if some GPS coordinates are located in the sea, however their use is very restricted. Therefore
we decided against incorporating this information into the dataset.
After the list of sports was selected, we downloaded 1,000 GPS tracks for each of the ten
selected sports from a sport social network. Every GPS track was labelled manually by the
users according to the sport they practised. In order to exclude fake or anomalous GPS tracks,
we discarded the tracks that do not satisfy a set of requirements of length of route and time
of track. After this ﬁltering process, we randomly selected 850 tracks for each type of sport
to produce a balanced dataset of 8,500 GPS tracks. Each track is characterised by the twelve
features included in Table 1. Figure 1 contains histograms for these twelve features. These
plots can help us to know the variability of the features in the dataset. An average activity
implies covering a distance of 44.22 km in 2 hours and 53 minutes with a maximum speed of 5
m/s (18 Km/h).
In Table 3 we analyse the averages of all the features for the ten kinds of sports. As expected,
we ﬁnd important diﬀerences among the classes. The sport with the shortest activity in distance
and time is running, while Motorcycling is the longest in distance and Mountaineering the
longest in time. If we consider speed, Mountaineering is the slowest activity and Motorcycling
is the fastest sport. Mountaineering is also the sport that reaches maximum elevations, and
sailing is logically the closest activity to the sea level, although it seems that some of the sailing
sessions have been performed in lakes. We believe that the high values of downhill norm and
uphill norm features in sailing activities are due to poor calibration of the GPS receivers.

3

Identifying the Sport by Classiﬁcation

After the collection of tracks and the feature extraction phase, we created a dataset formed by
8500 tracks, 12 attributes and ten diﬀerent classes. From this dataset we can apply classiﬁcation
techniques in order to know if they are able to predict accurately the sport that generated a GPS
track. In the experiments, we used some of the classiﬁcation methods of Weka suite in a R script
304

Identifying the Sport Activity of GPS Tracks

length_3d

250

3000
1000

0

0
100

0

100

250

stopped_time

0

4000
2000

4000
2000
0
0

moving_time
1000 2000 3000

length_2d

C`esar Ferri

0

20000

50000

0

15000 30000

Seconds

Seconds

moving_distance

stopped_distance

max_speed

ave_speed

100

250

0.0

1.0

2.0

4000
2000
20

40

0 10

30

m/s

m/s

uphillnorm

downhillnorm

maxe

mine

100 200 300
m/kms

0

100 200 300
m/kms

3000
1000
0

0

0

1000

1000

1000

2000

3000

KiloMeters

0
0

0

KiloMeters

2000

0

0

0 1000

0

0

2000

2000

4000

3000

Kilometers

4000

Kilometers

0

2000
Meters

4000

0

2000

4000

Meters

Figure 1: Histograms of the twelve features of the GPS track dataset.

by means of the library RWeka and caret . Speciﬁcally, we use the following twelve classiﬁcation
methods: a decision tree “J48”, a propositional rule learner “JRip”, logistic regression “Logist”,
naive Bayes “NB”, K-nearest neighbours with ten neighbours “IBK”, Random Forest “RF”, a
combination of ten J48 models by the Bagging technique “Bagging”, a decision list “PART”,
a combination of ten J48 models by the Boosting technique “Boosting”, a support vector
machine “SVM” , a Boosted Logistic Regression “LB” and a Mixture Discriminant Analysis
model “MDA”. In all the methods we used the default parameters except that we assigned
the parameter k to ten in “IBK”, and the selection of “J48” as base classiﬁer in Boosting and
Bagging. The results in accuracy of all these methods are shown in Table 5. These results are
the average of executing ten times a ten fold cross validation evaluation.
305

Identifying the Sport Activity of GPS Tracks
Feat.
Units
rn
tr
hi
mo
ky
sl
mb
ci
mc
tb

len 2d
km
8.68
16.47
12.06
13.96
14.73
35.19
36.10
54.36
111.11
66.64

len 3d
km
8.85
16.94
12.48
15.01
15.02
35.43
36.46
54.66
111.52
67.12

movtime
sec.
3237.21
7935.81
9410.45
14395.95
7318.30
9075.64
9382.89
9428.22
8335.79
8723.57

stptime
sec.
189.06
742.24
3059.37
8399.82
3017.64
2579.03
2094.88
1589.04
3594.34
3611.26

mvdist
km
8.82
16.80
12.17
14.13
14.82
35.24
36.22
54.53
111.28
66.87

C`esar Ferri
stpdist
km
0.02
0.08
0.28
0.83
0.17
0.18
0.14
0.10
0.23
0.23

maxsp
m/s
4.72
4.09
2.79
2.51
4.40
7.85
9.20
10.34
23.18
16.46

avesp
m/s
2.94
2.34
1.47
1.23
2.62
4.91
4.58
5.69
12.97
8.25

uphill
m/km
36.03
57.01
65.23
110.04
26.34
18.22
27.33
22.95
19.20
28.20

dwhill
m/s
35.45
55.05
60.50
97.94
26.65
17.93
27.64
22.63
19.45
27.73

maxe
met.
384
827
948
2464
198
101
688
674
953
911

mine
met.
289
409
574
1426
141
49
346
342
370
416

Table 3: Averages of the twelve features disaggregated by the kind of sport.
Class
ci
hi
ky
mb
mc
mo
rn
sl
tb
tr
Mean

ci
512
4
19
103
30
2
20
32
75
14

hi
4
608
87
6
2
85
23
12
20
70

ky
10
54
555
3
7
6
39
89
9
13

mb
182
8
18
653
14
6
11
19
39
18

Predicted Class
mc
mo
rn
21
2
20
6
95
21
10
3
29
9
3
8
607
2
9
3 716
6
10
5 584
23
3
40
192
9
15
4
21
133

sl
32
6
98
18
18
1
29
603
23
5

tb
58
8
21
27
155
4
6
19
446
18

tr
9
40
10
20
6
21
123
10
22
554

Perf. Metrics by class
Prec
Recall
F-Meas
0.631
0.602
0.616
0.663
0.715
0.688
0.707
0.653
0.679
0.675
0.768
0.718
0.686
0.714
0.700
0.834
0.842
0.838
0.675
0.687
0.681
0.724
0.709
0.717
0.585
0.525
0.553
0.680
0.652
0.665
0.686
0.687
0.686

Table 4: Confusion matrix for Bagging ten J48 trees (ten fold cross validation evaluation). On
the right part of the table we include performance metrics by class.

3.1

Flat Classiﬁcation Approach

In Table 4 we include the confusion matrix for a ten fold cross validation evaluation of Bagging
ten J48 trees. This confusion matrix shows how the classiﬁer distributes the errors. We also
include detailed information of some performance metrics by class [7]. The sport that is better
predicted is Mountaineering, since we reach a partial accuracy of 84% of the cases. The most
diﬃcult sport is Trail bike mainly because the classiﬁer assigns many of the Trail bike tracks
to Motorcycling tracks. In fact, the confusion matrix expresses a quite predictable behaviour
in the sense that we can see misclassiﬁcations between similar sports such as those mentioned
previously. Other examples of this behaviour are: Cycling-Mountain biking, Sailing-Kayaking,
Hiking-Mountaineering and Running-Trail running.

3.2

Local Classiﬁer Approach

When we address a problem with a relatively high number of classes, there exists the possibility
of decomposing the global classiﬁcation problem into smaller problems by grouping similar
classes, and thus forming a hierarchy of classes. This approach is named local classiﬁer approach.
In this work, we use the Local Classiﬁer Per Parent Node schema (terminology of [14]). Starting
from a given hierarchy of classes (where the original classes are placed in the leaves of the tree),
we learn a specialised classiﬁer for each branch node of the hierarchy tree, i.e. a local specialised
classiﬁer. A global classiﬁer loses the intuition that classes that are close to each other in the
hierarchy have more similarities with each other, in general, than topics that are far apart in
the hierarchy. In our case, it is less diﬃcult to classify that a track has been generated by
a running activity or a walking activity than to learn a classiﬁer that is able to predict the
306

Identifying the Sport Activity of GPS Tracks

C`esar Ferri

Sport

Bike

Foot

Sea

Walk

Mountain Biking Cycling

Sailing

Run

Kayaking

Mountaineering

Motor

Trail Bike

Hiking

Running

Motorcycling

Trail Running

Figure 2: Class hierarchy tree. Original classes correspond to the leaf nodes.
ten kinds of sport activities correctly. A drawback of the top-down class-prediction approach
is that an error at a top class level is going to be propagated down the hierarchy. There are
some techniques that try to reduce this problem, some of them by improving class probability
estimations like shrinkage [9] and isotonic smoothing [11].
Some studies present methods to build class hierarchies from the similarity of classes within
data [8]. In our case, we propose the hierarchy of Figure 2. Given the properties of the problem
in question, it is not diﬃcult to induce a class hierarchy tree by using the similarities among
the ten sports that the data reveals. In our proposal, we use locomotion form, surface type and
speed in order to cluster sports. Although there are other alternatives, for instance join Hiking
with Running, and Trail running with Mountaineering, if we analyse Table 4 we can see that
the joined classes are in most cases the ones with more common misclassiﬁcations.
Therefore, following the tree of classes5 of Figure 2, we inferred seven diﬀerent local classiﬁers
corresponding to the seven branch nodes of the tree. Each classiﬁer is specialised in classifying
between the class siblings of the branch. In order to learn each classiﬁer, we joined the corresponding classes following the tree. In Table 5 we can see the results in accuracy of this proposal
in comparison with the same learning techniques employed in the ﬂat classiﬁcation approach.
These results correspond to the averages of executing ten times a ten fold cross validation evaluation. In general, if we compare the ﬂat classiﬁcation approach with the local classiﬁcation
approach, we see that there is not a general pattern. For some techniques (especially JRip)
the local approach is able to improve the results of the traditional ﬂat methodology, however
we also ﬁnd techniques with the inverse behaviour (Logist, NB...). If we only consider the best
methods (multiclassiﬁers) the diﬀerences are small.

4

Hierarchical Classiﬁcation Approach

Given the hierarchy inherent in the classes, we analyse this problem as a hierarchical classiﬁcation problem using for that purpose the tree of Figure 2. For this framework, we consider that
5 Icons

made by Freepik and icons8 from www.ﬂaticon.com and licensed by Creative Commons.

307

Identifying the Sport Activity of GPS Tracks

Flat
Local

J48
0.616
0.628

JRip
0.564
0.609

Logist
0.569
0.548

NB
0.455
0.415

IBK
0.558
0.564

C`esar Ferri
RF
0.677
0.676

Bagg.
0.669
0.669

PART
0.605
0.610

Boost.
0.669
0.671

SMV
0.541
0.530

LB
0.611
0.592

MDA
0.508
0.504

Table 5: Accuracy of the classiﬁcation methods (average of ten times a ten fold cross validation).
Flat and local approaches. We highlight in bold the best result for each learning method.

hierarchical classiﬁcation can label a new instance with a label belonging to one of the branch
nodes of the class hierarchy tree. This could occur when the hierarchical classiﬁer determines
that it is not reliable enough to descend in the hierarchy and return a leaf node class. Following
the terminology of [14] this corresponds to a non-mandatory leaf node prediction approach. On
the contrary, the classiﬁer approaches of Section 3 must always return a class placed in a leaf
node of the tree (a mandatory leaf node prediction in the terminology of [14]). For our problem,
identifying the sport activity that is generated by a GPS track, this hierarchical approach can
be useful for the situations when the model is not sure about the conﬁdence of the predicted
class. In these cases the model could stop in a non-leaf class, and then it could suggest the leaf
classes descending from that node branch to the user.
For the hierarchical classiﬁcation approach we cannot use accuracy as a performance measure
since all the train instances belong to leaf classes, while some predictions will be branch classes.
Several performance metrics have been deﬁned speciﬁcally for the hierarchical classiﬁcation
task. A review of these measures can be found in [3]. In this work we use a metric based on
the distance in the tree of classes between the predicted and the actual class. Concretely, we
use a metric (hd) deﬁned as the number of edges that traverses the shortest path between the
predicted and the actual class (also known as tree-error [4]). We divide this amount by the
number of edges of the longest path in the trees in order to obtain a quantity between 0 and 1.
For instance, if the prediction is Mountain Biking and the real class is Trail Bike, we have that
the path between these to classes traverses 4 edges. Given that the longest path in the tree has
5 edges hd(mb,tb)=4/5. This measure is based on the rationale that classes that are close to
each other in the tree of hierarchies tend to be more similar to each other than other classes.
A similar evaluation metric was used in [15].

4.1

Non-Mandatory Leaf Node Prediction based on Probability Estimations

Here, we introduce a technique that is able to return classes that are not in the leaves by
using ﬂat classiﬁers and the tree of hierarchies. The idea is using the scores computed by ﬂat
classiﬁers as probability class estimations. With these estimations and the distances from the
tree of hierarchies we can compute the expected hd value for all classes and then we select the
class with the lowest expected value. This is similar to labelling instances that minimise the
expected misclassiﬁcation cost in cost-sensitive classiﬁcation. Formally, we deﬁne C as the set
of original classes (in our problem the ten diﬀerent sports) that correspond to the classes in the
leaves of the tree, we deﬁne Cext as C plus the classes in the branches of the tree of classes (in
our problem Sport, Bike, F oot...), p(i, c) returns the probablity estimation that an example i
belongs to a class c ∈ C, and hd(ci , ck ) computes the hd measure for ci , cj ∈ Cext . We deﬁne the
function hprb for classifying instances as: hprb(i) = argminc∈Cext ( k,∀k∈C p(i, c) ∗ hd(k, c)).
308

Identifying the Sport Activity of GPS Tracks

4.2

C`esar Ferri

Non-Mandatory Leaf Node Prediction based on Thresholds

When we are working with local classiﬁers, a direct way to deal with the non-mandatory leafnode prediction problem is to use a “blocking criterion” based on thresholds at each class node.
In this way, the classiﬁcation stops for an instance if the conﬁdence score of the classiﬁer at a
given class node for that instance is lower than a deﬁned threshold. A method for automatically
computing these thresholds is introduced in [2].
Here, we use a simple abstaining method inspired by the delegating classiﬁers proposed
in [6]. Given a conﬁdence parameter t, and a function pn (i, c) that returns the probably
estimation that an example i belongs to a class c ∈ Cn , where Cn is the set of classes of a
node n of the tree, we deﬁne a stopping criterion that halts the descending process in a node n
if max(pn (i, c) < ((1/|Cn |) + t)). In this way, we return the node class if any of the estimated
probabilities is bigger than the conﬁdence threshold (computed as (1/|Cn |) + t). Note that the
conﬁdence threshold depends on the number of classes Cn . When we set t = 0.3, if |Cn | = 2,
then the conﬁdence threshold will be 0.8, but if |Cn | = 4 the conﬁdence threshold will be 0.55.
In our experiments we set a conﬁdence parameter t=0.3.
In Table 6 we can see the Mean squared error (MSE) of the twelve methods and the results
in hd of the ﬂat classiﬁers detailed in Section 3.1 and the models induced by the local classiﬁer approach 3.2. We also show the hd of the hprb approach and the variation of the local
classiﬁers approach with a blocking criterion based on thresholds. First, we see that in general Non-Mandatory Leaf Node Prediction approaches (hprb and Local + block) present better
performance than Mandatory Leaf Node Prediction approaches (F lat and Local) according to
results in hd. The only exception is SVM where the best method is the ﬂat approach. This
result is probably caused by the poor quality of the probability estimations in this method
(reﬂected in the high value of MSE). If we study the insertion of the block strategy in the local
classiﬁer approach with respect to the original method, we see that this modiﬁcation allows us
to improve in all the cases the performance metric except from SVM, and therefore shows the
adequacy of stopping the descending of the tree of classes when there is uncertainty. Finally,
comparing Non-Mandatory Leaf Node Prediction approaches (hprb and Local + block), we can
observe that hprb obtains better results in seven methods, while Local + block gets the best
results in four techniques. According to the MSE of the methods, it seems that good probability estimations are more useful for Local + block since the methods with low values of MSE
present the best results with the Local + block approach. Our intuition is that bad estimations
of probabilities can cause bad decisions in the top levels of the classiﬁers tree and this damages
the ﬁnal performance of the Local + block approach.

5

Related Work

In pervasive computing, it is an important research problem to recognise the transportation
modes of people. Several works have addressed this problem. A proposal to automatically learn
transportation mode from raw GPS data is presented in [18]. Four diﬀerent inference models
(DTs, Bayesian Nets, SVMs and CRFs) are analysed in the experiments. The decision tree
model obtains the better results in terms of accuracy. The data is collected using the GPS data
of 45 users over six months period. The approach of [17] consists in detecting transportation
mode recognition on mobile phones only using the embedded accelerometer. A similar work is
[5]. In this research, the authors collected 150 hours of GPS and accelerometer data from two
users that practise ﬁve activities: bicycling, walking, riding in a vehicle, sitting, and standing.
The authors extract 49 features of this data and compare the performance of several machine
309

Identifying the Sport Activity of GPS Tracks

J48
JRip
Logist
NB
IBK
RF
Bagg.
PART
Boost.
SMV
LB
MDA

MSE
0.0580
0.1305
0.1837
0.0737
0.1574
0.1300
0.1228
0.0545
0.0278
0.2723
0.1468
0.1720

Flat
0.2571
0.3179
0.2963
0.4009
0.3036
0.2116
0.2166
0.2661
0.2147
0.3221
0.2619
0.3477

C`esar Ferri
Hprb
0.2567
0.2789
0.2844
0.3913
0.2730
0.1988
0.2037
0.2655
0.2117
0.4296
0.2438
0.3320

Local
0.2473
0.2684
0.3184
0.4200
0.2995
0.2113
0.2165
0.2594
0.2123
0.3275
0.2749
0.3540

Local+block
0.2449
0.2670
0.3053
0.4091
0.2857
0.2033
0.2095
0.2533
0.2098
0.4800
0.2599
0.3368

Table 6: MSE of the twelve methods and hd obtained by using two Mandatory Leaf Node Prediction approaches (F lat and Local) and two Non-Mandatory Leaf Node Prediction approaches
(hprb and Local + block). The results show the average of ten times ten fold cross validation
evaluation. The best approach in hd for each learning method is in bold.
learning methods. Only 6 of these features are obtained from the GPS data: average speed,
net distance travelled, and four more related to the GPS signal quality. In this work random
forests is the technique with the better performance.
An interesting paper is [16]. The goal of this work is to predict diﬀerent activity modes from
the combination of GPS and accelerometer data. In this case ten volunteers wore the sensors
during diﬀerent sessions where they practised these activities: walking, jogging, bicycling, inline
skating, or driving an automobile. The authors selected a set of features from accelerometer
counts, and steps and GPS speed by a discriminant function analysis. The best performance
is obtained by using three variables from the accelerometer and three from the GPS (median
counts, steps and speed). The authors claim that this pilot study provides evidence that the
use of GPS together with the accelerometer improves physical activity mode classiﬁcation to a
small degree, although they ﬁnd that larger studies among free-living individuals and with an
expanded range of activities are required to assess this conclusion.
There are also some articles that study the use of GPS data for several goals in social sciences
and medicine. A summary of diﬀerent works can be found in [1]. The purpose of this paper
is to review the utility of the GPS data in the study of health-related physical activity. The
paper remarks that GPS, especially when used in combination with GIS and accelerometers, is
a powerful tool for studying the relationship of environmental attributes to human behaviour
in terms of physical and transport-related activities. Finally, in [12] the authors try to identify
the proportion of children’s physical activity occurring in public parks with playgrounds.

6

Conclusions

Recognising the transportation modes of people is an open research problem with applications
in ﬁelds such as pervasive computing and mobile applications. In this paper, we aim to identify
the sport activity related to a GPS track. For that goal, we compiled a set of features from
a GPX ﬁle and we studied the predictive performance of several machine learning methods.
We gathered 8500 GPS tracks from social networks of ten kind of sport activities. In this
aspect, this work addresses a more complex and realistic scenario when we consider related
work. We have analysed the problem from two perspectives: ﬂat classiﬁcation and hierarchical
classiﬁcation. In this second case we compared diﬀerent hierarchical classiﬁcation approaches.
310

Identifying the Sport Activity of GPS Tracks

C`esar Ferri

The employment of these models can provide knowledge and information for the construction of
novel applications and the improvement of user experience in diﬀerent ways. For instance, if a
mobile device is able to detect when a user has started a running session, it could automatically
set a “running mode” with a speciﬁc conﬁguration adapted to that context (noise level, phone
interface...).
As future work we propose the integration of surface information features (on-road, oﬀroad, river..) that could probably improve the prediction performance. In this direction, the
integration of data collected from the accelerometer of the device could also be useful, as related
works have shown.

Acknowledgments
This work has been partially supported by the REFRAME project, granted by the European
Coordinated Research on Long-term Challenges in Information and Communication Sciences
Technologies ERA-Net (CHIST-ERA) funded by MINECO in Spain (PCIN-2013-037), the EU
(FEDER) and the Spanish MINECO under grants TIN 2015-69175-C4-1-R and TIN 201345732-C4-1-P and by Generalitat Valenciana under grant PROMETEOII/2015/013.

References
[1] Nancy F Butte, Ulf Ekelund, and Klaas R Westerterp. Assessing physical activity using wearable
monitors: measures of physical activity. Medicine and science in sports and exercise, 44(1):5–12,
2012.
[2] Michelangelo Ceci and Donato Malerba. Classifying web documents in a hierarchy of categories:
A comprehensive study. J. Intell. Inf. Syst., 28(1):37–78, 2007.
[3] E Costa, A Lorena, ACPLF Carvalho, and A Freitas. A review of performance evaluation measures
for hierarchical classiﬁers. In Evaluation Methods for Machine Learning II: papers from the AAAI2007 Workshop, pages 1–6, 2007.
[4] Ofer Dekel, Joseph Keshet, and Yoram Singer. Large margin hierarchical classiﬁcation. In Proceedings of the twenty-ﬁrst international conference on Machine learning, page 27. ACM, 2004.
[5] K Ellis, S Godbole, S Marshall, G Lanckriet, J Staudenmayer, and J Kerr. Identifying active
travel behaviors in challenging environments using GPS, accelerometers, and machine learning
algorithms. Frontiers in Public Health, pages 2–36, 2014.
[6] C´esar Ferri, Peter Flach, and Jos´e Hern´
andez-Orallo. Delegating classiﬁers. In in Proc. 21st
International Conference on Machine Learning, pages 27–36. Omnipress, 2004.
[7] C´esar Ferri, Jos´e Hern´
andez-Orallo, and R Modroiu. An experimental comparison of performance
measures for classiﬁcation. Pattern Recognition Letters, 30:27–38, 2009.
[8] Tao Li, Shenghuo Zhu, and Mitsunori Ogihara. Hierarchical document classiﬁcation using automatically generated hierarchy. Journal of Intelligent Information Systems, 29(2):211–230, 2007.
[9] Andrew McCallum, Ronald Rosenfeld, Tom M Mitchell, and Andrew Y Ng. Improving text
classiﬁcation by shrinkage in a hierarchy of classes. In ICML, volume 98, pages 359–367, 1998.
[10] Tadeusz Pietraszek. Optimizing abstaining classiﬁers using roc analysis. In Proc. of the 22nd
International Conference on Machine learning, pages 665–672. ACM, 2005.
[11] Kunal Punera and Joydeep Ghosh. Enhanced hierarchical classiﬁcation via isotonic smoothing.
In Proceedings of the 17th International Conference on World Wide Web, pages 151–160. ACM,
2008.

311

Identifying the Sport Activity of GPS Tracks

C`esar Ferri

[12] Robin Quigg, Andrew Gray, Anthony I Reeder, Alec Holt, and Debra L Waters. Using accelerometers and GPS units to identify the proportion of daily physical activity located in parks with
playgrounds in new zealand children. Preventive Medicine, 50(5):235–240, 2010.
[13] Armanda Rodrigues, Carlos Dam´
asio, and Jos´e Emanuel Cunha. Using GPS logs to identify
agronomical activities. In Connecting a Digital Europe Through Location and Place, pages 105–
121. Springer, 2014.
[14] Carlos N. Silla, Jr. and Alex A. Freitas. A survey of hierarchical classiﬁcation across diﬀerent
application domains. Data Mining and Knowledge Discovery, 22(1-2):31–72, 2011.
[15] Aixin Sun and Ee-Peng Lim. Hierarchical text classiﬁcation and evaluation. In Data Mining,
2001. ICDM 2001, Proceedings IEEE International Conference on, pages 521–528. IEEE, 2001.
[16] Philip J Troped, Marcelo S Oliveira, Charles E Matthews, Ellen K Cromley, Steven J Melly, and
Bruce A Craig. Prediction of activity mode with global positioning system and accelerometer
data. Medicine and Science in Sports and Exercise, 40(5):972–978, 2008.
[17] Shuangquan Wang, Canfeng Chen, and Jian Ma. Accelerometer based transportation mode recognition on mobile phones. In Wearable Computing Systems (APWCS10), pages 44–46. IEEE, 2010.
[18] Yu Zheng, Like Liu, Longhao Wang, and Xing Xie. Learning transportation mode from raw GPS
data for geographic applications on the web. In Proc. of the 17th International Conference on
World Wide Web, WWW ’08, pages 247–256. ACM, 2008.

312

